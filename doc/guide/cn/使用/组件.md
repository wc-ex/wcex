<!--DESC: {icon:{name:"dashboard_customize",pkg:"mdi",type:"filled"},id:1} -->
## 组件和 WebComponents

组件是 WCEX 实现的主要功能，每个组件都是一个标准的 html 文件，并被创建为一个标准的原生 **WebComponent** 。
- 组件需要使用唯一的 **\<template\>** 标签作为根标签。
- 组件内可包含标准的html内容.
- 由于标准的 WebComponents 良好的封装性,你可以不必担心CSS,这个命名以及变量的全球化冲突问题。

## 组件的命名
1. 组件的名称即html中所使用的 **Web Components** 标签的名称
2. 依据WebComponents 规范的要求，自定义组件的标签名必须包含"-"
3. 所有组件名称使用小写字母，可以支持中文

组件标签名转换规则:
> - 组件文件名称须使用 **小驼峰** 命名, 对应到组件的标签名为为 **下划线("_")** 为分割的单词。
> - 路径分隔符 "/" 将被转换为"-"。
> - 如转换后的结果不包含 "-", 则需在组件名称的最末尾加上 **"-"** 。
> - 每个组件所对应的标签有两种，分别是在工程或项目内部所引用的短名称和其他项目中引用的包含包名的完整标签。
> - 长名称格式为 "包名.组建名称", 以 "." 分割包名和组件名。
> - 如包名为包含组织名称的格式, 如 "@abc/def", 则实际转换出的标签名中需去除"@"字符

### 短名称格式
短名称格式常用于一个项目内部的组件之间相互调用，或者主入口项目中调用本项目的组件。
- 组件的短名称通常以根目录为起点，每一级目录都将被转换为标准的目录分隔符，对应的标签中以"-"作为分割 。
- 如果你在浏览器打开的是当前包主入口文件（通常的名称是index.html）, 则实际组件路径以主入口文件所在的目录作为根目录开始计算
- 所有组件路径只能向下进行计算，即仅计算子目录路径名。

#### 示例
假定你的项目具备如下的文件结构, 并挂载到本地 localhost:8080 端口根目录:
```text
/-
 |-- index.html
 |-- app.html
 |-- component \
 |-------------|-- com1.html
 |-------------|-- com2.html
 |-------------|-- index.html
 |-- test \
 |--------|-- helloWorld.html 
```

则当你在浏览器中访问: __http://localhost:8080/index.html__ 时，对应的标签名如下：

> **\<app-\>**, **\<component-com1\>**, **\<component-com2\>**, **\<test-hello_world\>**

如当你在浏览器中访问: __http://localhost:8080/components/index.html__ 时，对应的标签名如下：

> **\<com1-\>**, **\<com2\>**
> - 其父目录和同级目录中组件无法使用短名称进行访问，如必须访问则需要长名称命名格式。

### 完整名称（包含包名）
完整名称用于访问其他项目组件库包中的组件。

#### 示例
假定你拥有两个项目，其包名分别为: abc 和 @pkg/ui, 每个包装都拥有两个组件，分别是 com1.html 和 com2.html。则其完整标签名如下:

- 包: abc
>  **\<abc.com1-\>**, **\<abc.com2-\>**

- 包: @pkg/ui
>  **\<pkg-ui.com1\>**, **\<pkg-ui.com2\>**

- 你可以看到在第2个包中，由于名称中已经包含了 "-" ，则无需在最后附加 "-"。

## 组件的实现
组件实现文件是一个标准HTML文件，常见结构如下:

<div><wcex-doc.com-playground files="['component/index.html','component/app.html','component/com.html','component/com.ts']"></wcex-doc.com-playground></div>

### 组件属性
在组件根标签"<template>"中,可直接使用标准HTML属性定义组件属性
- 组件可以定义自身的属性(props), 定义的属性可以用于外部使用组件时进行传参
- 组件属性可附加类型修饰符，类型修饰符支持: **bool**, **int**,**float**,**obj**,**array**,**string** 类型, 默认为 "string" 
- 当一个组件定义了value属性时，它就具备了和标准 __input__ 组件类似的行为，可通过 **$$** 进行双向绑定
- 默认组件属性使用 **字符串** 进行值转换传递，可使用 **$** 修饰符使用值传递模式，此时 **$props** 将使用**原始值**进行传递, 可直接将外部原始对象（调用时使用**$** 传递属性）传入组件内部，也可以直接使用表达式进行计算初始默认值
### 组件事件
在组件根标签"<template>"中,可直接使用"@"语法定义组件根节点事件，事件可支持标准DOM事件以及组件特定事件,也可使用事件修饰:.stop,.prevent,.capture,.self,.once.>
- 组件特殊事件:
    - @create: 响应组件创建事件
    - @ready: 响应组件初始化完成事件
    - @destroy: 响应组件销毁事件
    - @timer: 响应组件定时器事件,定时器为可自动销毁的定时器，可使用 **@timer.1000** 格式定义定时器周期，单位为毫秒，默认为1000毫秒


### 组件数据
- 可通过 \<meta name="scope" \> 标签设置内部变量，同样支持类型修饰符
- 也可使用 **script** 标签引入类, 创建组件变量和方法
- 所有 **prop** 和 **meta[scope]** 以及 **script** 方式定义的变量或者方法均可在组件数据绑定时直接使用
- 组件中使用 **script** 标签可导入作用域类，如此标签 **src** 属性为 "."，则代表引入当前组件同名的js或者ts
- 当使用 typescript 文件时，您可得到完整的语法提示等信息，可直接导入第三方库，具体规则请参与后续章节
